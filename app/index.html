<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <link rel="icon" type="image/png" href="./images/favicon.ico"/>
    <title>Mopane</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
    <style>[data-ng-cloak] {
        display: none !important;
    }</style>
    <link href="styles/styles.css" rel="stylesheet"/>

</head>
<body class="preview whitebg" id="top" data-spy="scroll" data-target=".subnav" data-offset="80"
      data-ng-controller="MainController">

<!--Loader -->
<div id="loaderWrapper" data-ng-hide="domReady" style="position: absolute; height: 100%; width: 100%; top: 0;">
    <div id="loader" style="margin: 175px auto">
        <div class="wrapper">
             <img src="images/hloader.gif" style="margin: 10px auto" class="img-responsive">
             <h2 class="text-center">loading...</h2>
          </div>
    </div>
</div>

<div data-ng-hide="!domReady" data-ng-cloak>
    <!-- Login Form  -->
    <div class="container" style="margin-top:10vh;" data-ng-hide="currentSession.user != null" data-ng-controller="LoginFormController">


        <div class="row">
            <div class="col-xs-12">
<!--                 <div class="pull-right ">
                    {{ 'label.input.changelanguage' | translate }}
                    <div class="btn-group" uib-dropdown>
                        <button type="button" class="btn btn-default btn-xs" uib-dropdown-toggle ng-disabled="disabled">
                            {{optlang.name}} <span class="caret"></span>
                        </button>
                        <ul class="lang-dropdown" uib-dropdown-menu>
                            <li ng-repeat="lang in langs">
                                <a href ng-click="changeLang(lang, $event)">{{lang.name}}</a>
                            </li>
                        </ul>
                    </div>
                </div> -->

                <!-- <div ng-show="resetPassword">
                    <form class="form-inline pull-right" role="form">
                        <label><strong>{{ 'label.message.password.expired' | translate }}</strong></label>

                        <div class="form-group">
                            <input type="password" data-ng-model="passwordDetails.password"
                                   placeholder="{{ 'label.input.password' | translate }}" class="input-sm form-control"
                                   required
                                   id="password">
                        </div>
                        <div class="form-group">
                            <input type="password" data-ng-model="passwordDetails.repeatPassword"
                                   placeholder="{{ 'label.input.repeatpassword' | translate }}"
                                   class="input-sm form-control"
                                   required id="repeatPassword">
                        </div>
                        <button class="btn btn-success" type="submit" data-ng-click="updatePassword()"
                                id="updatepassword-button">{{ 'label.button.resetPassword' | translate }}
                        </button>
                    </form>
                </div> -->

            </div>


        </div>

        <div class="row">
            <div class="col-xs-12">
                <div class="row">
                    <div class="col-sm-4 col-sm-offset-4 text-center">
                        <img src="images/mopane.png" alt="Logo" style="width:80%; margin:auto;"
                             class=" text-center img-responsive"/>
                    </div>
                </div>
                <hr>

                <div data-ng-form="loginForm">

                  <div ng-show="resetPassword">
                      <form class="form" role="form">
                          <label><strong>{{ 'label.message.password.expired' | translate }}</strong></label>

                          <div class="form-group">
                              <label for="uid">Password</label>
                              <input type="password" data-ng-model="passwordDetails.password"
                                     placeholder="{{ 'label.input.password' | translate }}" class="input-sm form-control"
                                     required
                                     id="password">
                          </div>
                          <div class="form-group">
                              <label for="uid">Confirm Password</label>
                              <input type="password" data-ng-model="passwordDetails.repeatPassword"
                                     placeholder="{{ 'label.input.repeatpassword' | translate }}"
                                     class="input-sm form-control"
                                     required id="repeatPassword">
                          </div>
                          <button class="btn btn-success" type="submit" data-ng-click="updatePassword()"
                                  id="updatepassword-button">{{ 'label.button.resetPassword' | translate }}
                          </button>
                      </form>
                  </div>

                    <div class="row" ng-hide="resetPassword || twoFactorRequired">
                        <div class="col-sm-4 col-sm-offset-4">

                            <div class="alert alert-danger" ng-show="authenticationFailed">
                                {{ authenticationErrorMessage | translate }}
                            </div>

                            <form class="form">

                                <div class="form-group">
                                    <label for="uid">USERNAME</label>
                                    <input type="text" name="username" id="uid" class="form-control"
                                           ng-model="loginCredentials.username"
                                           placeholder="Username"
                                           required/>
                                </div>

                                <div class="form-group">
                                    <label for="pwd">PASSWORD</label>
                                    <input type="password" name="password" id="pwd" class="form-control"
                                           ng-model="loginCredentials.password" autocomplete="new-password"
                                           placeholder="Password"
                                           required/>
                                </div>

                                <div class="form-group">
                                    <button class="btn btn-block btn-primary" type="submit" data-ng-show="!load" data-ng-click="login()"
                                            id="login-button">
                                        Sign In
                                    </button>
                                    <button class="btn btn-block btn-primary" type="submit" data-ng-show="load">
                                        <img data-ng-src="images/ring.svg" alt=""> <b>loading...</b>
                                    </button>
                                </div>

                            </form>

                        </div>
                    </div>

                    <div class="row" ng-show="twoFactorRequired && !otpRequested">
                            <div class="col-sm-4 col-sm-offset-4">
                                <h4>{{'label.heading.twofactor' | translate}}</h4>
                                <hr>

                                <p>{{'label.otp.delivery.info' | translate}}</p>
                                <form class="form">
                                    <div class="form-group">
                                        <div ng-repeat="deliveryMethod in twoFactorDeliveryMethods" class="radio form-group">
                                            <label for="{{deliveryMethod.name}}">
                                            <input type="radio" id="{{deliveryMethod.name}}" name="otpDeliveryMethods"
                                                   ng-model="$parent.selectedDeliveryMethodName" value="{{deliveryMethod.name}}">
                                                {{'label.otp.delivery.select.' + deliveryMethod.name | translate:deliveryMethod}}</label>
                                        </div>
                                        <div class="checkbox form-group">
                                            <label for="twofactorRememberMe">
                                                <input type="checkbox" id="twofactorRememberMe" name="twofactorRememberMe" ng-model="twofactorRememberMe">
                                                {{'label.button.tfa.remember_me' | translate }}
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <button class="btn btn-block btn-primary" type="submit" data-ng-show="!load" data-ng-click="requestOTP()"
                                                id="otp-request-button">
                                            {{'label.button.otp.request' | translate}}
                                        </button>
                                        <button class="btn btn-block btn-primary" type="submit" data-ng-show="load">
                                            <img data-ng-src="images/ring.svg" alt=""> <b>loading...</b>
                                        </button>
                                    </div>
                                </form>
                            </div>
                    </div>

                    <div class="row" ng-show="otpRequested">
                        <div class="col-sm-4 col-sm-offset-4">
                            <hr>
                            <h4>{{'label.heading.twofactor' | translate}}</h4>
                            <p>
                                {{'label.otp.verify.info' | translate}}
                            </p>

                            <div class="alert alert-danger" ng-show="otpTokenError">
                                {{otpErrorMessage | translate}}
                            </div>

                            <form class="form">
                                <div class="form-group">
                                    <label for="otpToken">{{'label.otp.token' | translate}}</label>
                                    <input type="text" id="otpToken" name="otpDeliveryMethods" class="form-control"
                                           ng-model="otpToken">
                                </div>
                                <div class="form-group">
                                    <button class="btn btn-block btn-primary" type="submit" data-ng-show="!load" data-ng-click="validateOTP()"
                                            id="otp-verify-button">
                                        {{'label.button.signin' | translate }}
                                    </button>
                                    <button class="btn btn-block btn-primary" type="submit" data-ng-show="load">
                                        <img data-ng-src="images/ring.svg" alt=""> <b>loading...</b>
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                </div>

                <hr/>
                <div class="row">
                    <div class="col-sm-6 col-sm-offset-3 text-center">
                        <br>

                        <p class=" text-muted"><span ng-bind-html="text"></span>
                            <br>
                            <span style=" display: inline-block; margin:auto;min-width:40px; border-bottom:2px solid #e0e0e0;">&nbsp;</span>
                        </p>

                    </div>
                </div>
                <p class="text-center text-muted small">
                    <!-- <span>{{ 'label.heading.version' | translate }} {{ version }}</span>
                    <br/> <span>{{ 'label.heading.uptodate' | translate }}</span> -->
                </p>
            </div>
        </div>
    </div>

    <!-- Navbar -->
    <div ng-class="{fullscreen:true ,blockui:blockUI==true}" id="main" data-ng-hide="currentSession.user == null">
        <div class="loading-widget-div" data-ng-show="blockUI">
            <!-- TODO : insert loader here-->
             <span class="centerloader">
                <img src="images/ring.svg" class="img-responsive">
            </span>
            <!--<div style="margin: 175px auto">
            </div>-->
        </div>

        <div id="mifos-reskin-ui-container">
            <div id="mifos-reskin-header-nav" ng-include="'views/_topnavbar.html'"></div>

            <div id="mifos-reskin-body-container" style="background-color: #ebeff1">

            </div>
            <div id="mifos-reskin-body-view">
                <div class="" ng-view></div>
                <!-- Footer -->
                <br><br>
                <footer>
                    <p align="center">Designed and Developed By <a href="http://www.mopane.co.zw"
                            target="_blank">Mopane Systems</a></p>
                </footer>
                <hr>
            </div>
        </div>
    </div>
</div>
<!-- Le javascript -->
<script type='text/javascript' data-main="scripts/loader.js" src='bower_components/requirejs/require.js'></script>
<!-- <script>
define(['jquery','datatables.net'], function($) {
    $('#example').DataTable();
});
</script> -->

</body>
</html>
